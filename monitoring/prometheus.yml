global:
  scrape_interval: 5s
  evaluation_interval: 5s

rule_files:
  - /etc/prometheus/alerts.yml

scrape_configs:
  # Extractor service (Go)
  - job_name: 'extractor'
    static_configs:
      - targets: ['extractor:2112']

  # Transformer service (Python)
  - job_name: 'transformer'
    static_configs:
      - targets: ['transformer:8001']

  # Cleaner service (Python)
  - job_name: 'cleaner'
    static_configs:
      - targets: ['cleaner:8002']

  # API service (FastAPI)
  - job_name: 'api'
    static_configs:
      - targets: ['api:8000']

  # Dashboard service (Streamlit)
  - job_name: 'dashboard'
    static_configs:
      - targets: ['dashboard:8003']

  # RabbitMQ (via exporter)
  - job_name: 'rabbitmq'
    static_configs:
      - targets: ['rabbitmq-exporter:9419']

  # MinIO cluster metrics
  - job_name: 'minio'
    metrics_path: '/minio/v2/metrics/cluster'
    static_configs:
      - targets: ['minio:9000']

  # MinIO bucket metrics (for per-bucket object counts)
  - job_name: 'minio-bucket'
    metrics_path: '/minio/v2/metrics/bucket'
    static_configs:
      - targets: ['minio:9000']
